#!/bin/sh

#########################################
# Commands to forwart mssql port to parallels
alias mssql.ncat='sudo ncat --sh-exec "ncat 10.211.55.9 1433" -l 1433 --keep-open'

#################################
# Simple Program Name Shortening
# alias g=git

#############################
# Utilities

# Lock the screen (when going AFK)
# alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"
alias afk="open -a /System/Library/CoreServices/ScreenSaverEngine.app"

# buzzphrase commit
# used for my presentation decks when I have nothing to say about the commit
# alias bpc='git add -A . && git cam "$(buzzphrase 2)" && git push'

# recursive dos2unix in current directory
alias dos2lf='dos2unix `find ./ -type f`'

# Flush the DNS on Mac
alias dnsflush='dscacheutil -flushcache'

# Empty the Trash on all mounted volumes and the main HDD.
# Also, clear Appleâ€™s System Logs to improve shell startup speed.
# Finally, clear download history from quarantine. https://mths.be/bum
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl; sqlite3 ~/Library/Preferences/com.apple.LaunchServices.QuarantineEventsV* 'delete from LSQuarantineEvent'"

# Files being opened
alias files.open='sudo fs_usage -e -f filesystem|grep -v CACHE_HIT|grep -v grep|grep open'
# Files used, anywhere on the filesystem
alias files.usage='sudo fs_usage -e -f filesystem|grep -v CACHE_HIT|grep -v grep'
# Files in use in the Users directory
alias files.usage.user='sudo fs_usage -e -f filesystem|grep -v CACHE_HIT|grep -v grep|grep Users'

# alias game.seek='txt="";for i in {1..20};do txt=$txt"$i. ";done;txt=$txt" Ready or not, here I come";say $txt'

# Git Tools
# assumes git-up is installed (gem install git-up)
# switches to 'develop' branch, updates all local branches (nicely using git-up), removes all local branches already merged into 'develop'
# alias gitdev='git checkout develop; git-up; git branch --merged develop | grep -v "\* develop" | xargs -n 1 git branch -d; git branch;'

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias iplocal="ipconfig getifaddr en0"
alias ips="ifconfig -a | grep -o 'inet6\? \(addr:\)\?\s\?\(\(\([0-9]\+\.\)\{3\}[0-9]\+\)\|[a-fA-F0-9:]\+\)' | awk '{ sub(/inet6? (addr:)? ?/, \"\"); print }'"

# Show active network interfaces
alias ifactive="ifconfig | pcregrep -M -o '^[^\t:]+:([^\n]|\n\t)*status: active'"

# Show network connections
# Often useful to prefix with SUDO to see more system level network usage
alias network.connections='lsof -l -i +L -R -V'
alias network.established='lsof -l -i +L -R -V | grep ESTABLISHED'
alias network.externalip='curl -s http://checkip.dyndns.org/ | sed "s/[a-zA-Z<>/ :]//g"'
alias network.internalip="ifconfig en0 | egrep -o '([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)'"

# Directory listings
# LS_COLORS='no=01;37:fi=01;37:di=07;96:ln=01;36:pi=01;32:so=01;35:do=01;35:bd=01;33:cd=01;33:ex=01;31:mi=00;05;37:or=00;05;37:'
# -G Add colors to ls
# -l Long format
# -h Short size suffixes (B, K, M, G, P)
# -p Postpend slash to folders
alias ls='ls -G -h -p '
alias ll='ls -l -G -h -p '

# Print each PATH entry on a separate line
alias path='echo -e ${PATH//:/\\n}'

# Copy and paste and prune the usless newline
alias pbcopynn='tr -d "\n" | pbcopy'

# firewall management
# alias port-forward-enable="echo 'rdr pass inet proto tcp from any to any port 2376 -> 127.0.0.1 port 2376' | sudo pfctl -ef -"
# alias port-forward-disable="sudo pfctl -F all -f /etc/pf.conf"
# alias port-forward-list="sudo pfctl -s nat"

# push git repo, but first, use git-up to make sure you are in sync and rebased with the remote
# alias pushup="git-up && git push"
# Set the extended MacOS attributes on a file such that Quicklook will open it as text
# alias qltext='xattr -wx com.apple.FinderInfo "54 45 58 54 21 52 63 68 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00" $1'
#alias qltext2='osascript -e tell application "Finder" to set file type of ((POSIX file "$1") as alias) to "TEXT"'

# Reload the shell (i.e. invoke as a login shell)
alias reload="exec $SHELL -l"

# Disable Spotlight
# alias spotoff="sudo mdutil -a -i off"
# Enable Spotlight
# alias spoton="sudo mdutil -a -i on"

# Get macOS Software Updates, and update installed Ruby gems, Homebrew, npm, and their installed packages
# alias update='sudo softwareupdate -i -a; brew update; brew upgrade; brew cleanup; mas upgrade; npm install npm -g; npm update -g; sudo gem update --system; sudo gem update; sudo gem cleanup'
alias update='sudo softwareupdate -i -a; brew update; brew upgrade; brew cask outdated | xargs brew cask reinstall; brew cleanup -s; npm install npm -g; npm update -g; yarn global upgrade'

alias vtop="vtop --theme wizard"

alias jsonfix="pbpaste | jq . | pbcopy"

alias lookbusy="cat /dev/urandom | hexdump -C | grep \"34 32\""
# alias td="todo.sh"
# alias tda="todo.sh add"
# alias tdl="todo.sh list"
# alias tdd="todo.sh do"

# Restart Apache on Mac
alias apache.start="sudo apachectl start"
alias apache.stop="sudo apachectl stop"
alias apache.restart="sudo apachectl restart"

# Git cleanup commands
alias git.cleanup='git branch --merged | grep -v "\*" | grep -v master | grep -v dev | grep -v release | xargs -n 1 git branch -d'

# Backup
alias backup.speedup="sudo sysctl debug.lowpri_throttle_enabled=0"

# Docker
alias docker.init.default='eval "$(docker-machine env default)"'
alias docker.init.aws01='eval "$(docker-machine env aws01)"'
alias docker.init.IB-OPS-ELK-DOCKER='eval "$(docker-machine env IB-OPS-ELK-DOCKER)"'
alias docker.init.isbops='eval "$(docker-machine env isbops)"'
# http://blog.yohanliyanage.com/2015/05/docker-clean-up-after-yourself/
alias docker.cleanup.containers='docker rm -v $(docker ps -a -q -f status=exited)'
alias docker.cleanup.images='docker rmi $(docker images -f "dangling=true" -q)'
alias docker.cleanup.volumes='docker run -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker:/var/lib/docker --rm martin/docker-cleanup-volumes'

# npm
alias npm.outdated.globals='npm outdated -g --depth=0'

# usefull aliases
alias reboot='osascript -e '"'"'tell application "System Events" to restart'"'"''
alias shutdown='osascript -e '"'"'tell application "System Events" to shut down'"'"''
alias editdotfiles='subl /Users/ttardy/.dotfiles'
alias gotodotfiles='cd /Users/ttardy/.dotfiles'
alias sysprefs='open "x-apple.systempreferences:"'
alias staaviscosity='open -a /Applications/Viscosity.app'

# mp aliases
alias staltimetrack='open http://hengst.mptechnology.com/timetrack/app'
alias stalwiki='open https://wiki.mptechnology.ch/display/MPT'
alias stalmp='staltimetrack'
alias staamp='open -a /Applications/Microsoft\ OneNote.app; open -a /Applications/Mail.app; open -a /Applications/Fantastical\ 2.app; open -a /Applications/Google\ Chrome.app; open -a /Applications/Slack.app; open -a /Applications/Setapp/ForkLift.app; mp.mount.hengst.sysadmin; backup.speedup'
alias mp.mount.hengst.sysadmin='osascript -e '"'"'tell application "Finder" to open location "smb://hengst.mptechnology.com/sysadmin"'"'"''
alias mp.dyndns='~/Scripts/dyn.sh'
alias mp.vpn='mp.dyndns && staaviscosity'
alias staaintellij='open -a /Applications/IntelliJ\ IDEA.app'
alias staasourcetree='open -a /Applications/SourceTree.app'
alias staaparallels='open -a /Applications/Parallels\ Desktop.app'
alias staapostgres='open -a /Applications/Postgres.app'

# mp aliases for SAYANO
alias stalsayjenkins='open http://reactor.mptechnology.com/jenkins/view/sayano/'
alias stalsaypullrequests='open https://kepler.mptechnology.ch/bitbucket/projects/SAY/repos/sayano-app/pull-requests'
alias stalsaywiki='open https://wiki.mptechnology.ch/display/MPT/SAYANO'
alias stalsayjiraopeninrelease='open https://jira.mptechnology.ch/issues/?filter=12874'
alias stalsayjiraboard='open https://jira.mptechnology.ch/secure/RapidBoard.jspa?rapidView=37'
alias stalsay='stalsayjenkins; stalsaypullrequests; stalsaywiki; stalsayjiraopeninrelease; stalsayjiraboard'
alias staasay='staaintellij; staasourcetree; staaparallels'
alias gotosay='cd /Users/ttardy/Projects/sayano/sayano-app'

# mp aliases for Pexapark
alias stalpexjenkins='open http://mistral.pexapark.com/jenkins/'
alias stalpexpullrequests='open https://bitbucket.org/fmupexapark/pexapark-mvp/pull-requests/'
alias stalpexjiraboard='open https://pexapark.atlassian.net/secure/RapidBoard.jspa?rapidView=2&projectKey=PEX'
alias stalpex='stalpexjenkins; stalpexpullrequests; stalpexjiraboard'
alias staapex='staaintellij; staapostgres; staasourcetree'
alias gotopex='cd /Users/ttardy/Projects/pexapark/pexapark-mvp'

# mp alias for Evalueserve
alias stalisbjenkins='open http://reactor.mptechnology.com/jenkins/view/isb-customer/'
alias stalibbjenkins='open http://reactor.mptechnology.com/jenkins/view/isb-khive/'
alias stalisbpullrequests='open https://kepler.mptechnology.ch/bitbucket/projects/IB/repos/isb-customer/pull-requests'
alias stalibbpullrequests='open https://kepler.mptechnology.ch/bitbucket/projects/IB/repos/isb-khive/pull-requests'
alias stalisbjiraopeninrelease='open https://services.mptechnology.ch/jira/issues/?filter=12406'
alias stalisbjiraboard='open https://services.mptechnology.ch/jira/secure/RapidBoard.jspa?rapidView=21'
alias stalisb='stalisbjenkins; stalibbjenkins; stalisbpullrequests; stalibbpullrequests; stalisbjiraopeninrelease; stalisbjiraboard'
alias staaisb='staaintellij; staasourcetree, staaparallels'
alias gotoisb='cd /Users/ttardy/Projects/insightbee/isb-customer'

# mp alias for VSTP
alias stalvstpjenkins='open http://reactor.mptechnology.com/jenkins/view/vstp/'
alias stalvstppullrequests='open https://kepler.mptechnology.ch/bitbucket/projects/VSTP/repos/vstp/pull-requests'
alias stalvstpjiraboard='open https://jira.mptechnology.ch/secure/RapidBoard.jspa?rapidView=30'
alias stalvstp='stalvstpjenkins; stalvstppullrequests; stalvstpjiraboard'
alias staavstp='staaintellij; staasourcetree; staaparallels'

# private aliases
alias cloatiming='osascript -e '"'"'tell application "/Applications/Setapp/Timing.app/Contents/Library/LoginItems/TimingHelper.app/Contents/MacOS/TimingHelper" to quit'"'"''
alias cloagooglesync='osascript -e '"'"'tell application "/Applications/Backup and Sync.app/Contents/MacOS/Backup and Sync" to quit'"'"''
alias goprivate='cloatiming; cloagooglesync'